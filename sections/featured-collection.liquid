<section class="featured-collection">
    <div class="container">
        <h2 class="section-title">{{ section.settings.title }}</h2>
        
        <div class="products-grid">
            {% for product in section.settings.collection.products limit: section.settings.products_limit %}
                <div class="product-card">
                    <div class="product-image">
                        {% if product.featured_image %}
                            {{ product.featured_image
                        | image_url: width: 800
                        | image_tag:
                            widths: '200,300,400,600,800',
                            sizes: '(max-width: 768px) 100vw, 300px',
                            alt: product.title
                        }}

                        {% endif %}
                    </div>
                    
                    <div class="product-content">
                        <h3 class="product-title">{{ product.title }}</h3>
                        
                        <div class="product-price">
                            {% if product.compare_at_price > product.price %}
                                <span class="original-price">{{ product.compare_at_price | money }}</span>
                            {% endif %}
                            <span class="price">{{ product.price | money }}</span>
                        </div>
                        
                        <a href="{{ product.url }}" class="btn btn-primary">Buy Now</a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

<style>
    .featured-collection { padding: 40px 0; }
    .section-title { text-align: center; margin-bottom: 30px; font-size: 28px; }
    .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
    .product-card { border: 1px solid #eee; border-radius: 8px; overflow: hidden; }
    .product-image img { width: 100%; height: 250px; object-fit: cover; }
    .product-content { padding: 15px; }
    .product-title { margin: 10px 0; font-size: 16px; }
    .product-price { margin: 10px 0; font-weight: bold; }
    .btn { display: inline-block; padding: 10px 20px; background: #000; color: #fff; text-decoration: none; border-radius: 4px; }
</style>

{% schema %}
{
    "name": "Featured Collection",
    "settings": [
        {
            "type": "text",
            "id": "title",
            "label": "Section Title",
            "default": "Featured Collection"
        },
        {
            "type": "collection",
            "id": "collection",
            "label": "Select Collection"
        },
        {
            "type": "range",
            "id": "products_limit",
            "label": "Number of Products",
            "min": 1,
            "max": 12,
            "step": 1,
            "default": 4
        }
    ],
    "presets": [
        {
            "name": "Featured Collection"
        }
    ]
}
{% endschema %}